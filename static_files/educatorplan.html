<!DOCTYPE html>
<html>
<!-- Educator screen 1 | Start a Plan-->
<head>
	<title>Art Museum Portal | Educator</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="../css/home.css">
  <script src="jquery-3.3.1.min.js"></script>

  <script type="text/javascript">
  // jQuery convention for running when the document has been fully loaded:
  $(document).ready(() => {
    console.log("hi");
		$.ajax({
			// all URLs are relative to http://localhost:3000/
			url: 'current',
			type: 'GET',
			dataType : 'json', // this URL returns data in JSON format
			success: (data) => {
				console.log('You received some data!', data);

				if (data.identity && data.username) {
					$('#status').html('You have logged in as '+ data.username);
					tempuser = data.username;
				} else {
					$('#status').html('Error: user account does not exist!');
				}
			},
		});
    $('#searchresults').hide();
    $('#searchButton').click(() => {
      const requestURL = 'galleries/' + $('#searchQuery').val();
      console.log(requestURL);
      console.log('making ajax request to:', requestURL);
      $.ajax({
      // all URLs are relative to http://localhost:3000/
      url: requestURL,
      type: 'GET',
      dataType : 'json', // this URL returns data in JSON format
      success: (data) => {
        console.log('You received some data!', data);

        if (data.keywords) {
          $('#featured-exhibits').html('Search results:');
          $('#featuredlist').hide();
          $('#searchresults').show();
          $('#search-title').html(data.name);
          $('#search-description').html(data.theme);

        } else {
          $('#featured-exhibits').html('No results found!');
          $('#featuredlist').hide();
        }
      },
    });

    // define a generic Ajax error handler:
    // http://api.jquery.com/ajaxerror/
    $(document).ajaxError(() => {
      $('#status').html('Error: unknown ajaxError!');
    });
  });
  });
</script>
</head>

<body>
	<div id="status">current user</div>
  <h1 class="title2">Step 2: Start a Plan</h1>
  <br>
  <input type="text" placeholder="Search the museum" aria-label="Search" id="searchQuery">
  <button type="submit" class="btn btn-primary mb-2" id="searchButton">Search</button>

  <h2 id="featured-exhibits">Featured Exhibits:</h2>
  <div class="form-check" id="featuredlist">
    <div class="exhibit-checks">
      <input class="form-check-input" type="checkbox" value="" id="check1">
      <label class="form-check-label" for="check1">Exhibit 1</label>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit</p>
    </div>
    <br>
    <div class="exhibit-checks">
      <input class="form-check-input" type="checkbox" value="" id="check2">
      <label class="form-check-label" for="check2">Exhibit 2</label>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit</p>
    </div>
    <br>
    <div class="exhibit-checks">
      <input class="form-check-input" type="checkbox" value="" id="check3">
      <label class="form-check-label" for="check2">Exhibit 3</label>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit</p>
    </div>
    <br>
    <div class="exhibit-checks">
      <input class="form-check-input" type="checkbox" value="" id="check4">
      <label class="form-check-label" for="check2">Exhibit 4</label>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit</p>
    </div>
  </div>

  <div class="form-check" id="searchresults">
    <div class="exhibit-checks">
      <input class="form-check-input" type="checkbox" value="" id="check4">
      <label class="form-check-label" for="check2" id="search-title"></label>
      <p id="search-description"></p>
    </div>
  </div>


  <div class="back-button">
    <a href="register.html" class="btn btn-primary">< Back</a>
  </div>
  <div class="next-button">
    <a href="pathgenerate.html" class="btn btn-primary">Next ></a>
  </div>
</body>
</html>
